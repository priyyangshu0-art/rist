<!doctype html>
<html lang="en" data-theme="">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Faculty Directory â€” RIST</title>
  <meta name="description" content="Faculty directory of Regent Institute of Science & Technology (RIST). Search by name, filter by department, and view profiles." />
  <meta name="theme-color" content="#0d47d9" />

  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet"/>

  <style>
    /* Hide selected nav items on desktop, keep them in mobile menu */
    @media (min-width: 1025px) {
      #primaryNav .mobile-only { display: none !important; }
    }

    :root{--brand:#0d47d9;--brand-2:#1e6bff;--brand-3:#5ea1ff;--bg:#fff;--surface:#f7fbff;--surface-2:#eef5ff;--text:#0f172a;--muted:#667085;--radius:14px;--shadow:0 10px 30px rgba(2,8,23,.08);--ring:0 0 0 4px rgba(13,71,217,.12)}
    @media (prefers-color-scheme: dark) {
      :root:not([data-theme]){--bg:#0b1220;--surface:#0f172a;--surface-2:#0b1629;--text:#e5e7eb;--muted:#9ca3af;--shadow:0 10px 30px rgba(0,0,0,.4)}
    }
    :root[data-theme="dark"]{--bg:#0b1220;--surface:#0f172a;--surface-2:#0b1629;--text:#e5e7eb;--muted:#9ca3af;--shadow:0 10px 30px rgba(0,0,0,.4)}

    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    *[id]{scroll-margin-top:84px}
    body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,sans-serif;line-height:1.6}

    /* Background accent like index */
    body::before{content:"";position:fixed;inset:-20%;z-index:-1;pointer-events:none;
      background:
      radial-gradient(60% 60% at 80% 0%, color-mix(in hsl, var(--brand-3), white 85%), transparent 60%),
      radial-gradient(50% 50% at 10% 10%, color-mix(in hsl, var(--brand), white 88%), transparent 55%),
      conic-gradient(from 210deg at 70% 30%, color-mix(in hsl, var(--brand-2), white 90%), transparent 25% 60%, color-mix(in hsl, var(--brand-3), white 90%) 0 85%, transparent 0 100%);
      opacity:.6; filter:saturate(110%)}

    .skip-link{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}
    .skip-link:focus{left:16px;top:16px;width:auto;height:auto;background:#fff;color:#000;padding:8px 12px;border-radius:8px;z-index:10000}

    /* Header (aligned with index) */
    header{position:sticky;top:0;z-index:1000;background:color-mix(in hsl, var(--bg), transparent 20%);backdrop-filter:saturate(150%) blur(10px);border-bottom:1px solid color-mix(in hsl, var(--text), transparent 90%)}
    .nav{max-width:1200px;margin:0 auto;padding:14px 20px;display:flex;align-items:center;gap:16px;justify-content:space-between;position:relative}
    .brand{display:flex;align-items:center;gap:12px;text-decoration:none;color:inherit}
    .brand-logo{width:96px;height:96px;border-radius:12px;object-fit:contain;display:block}
    .brand-logo.dark{display:none}
    :root[data-theme="dark"] .brand-logo.dark{display:block}
    :root[data-theme="dark"] .brand-logo.light{display:none}
    @media (prefers-color-scheme: dark){
      :root:not([data-theme]) .brand-logo.dark{display:block}
      :root:not([data-theme]) .brand-logo.light{display:none}
    }
    @media (max-width:700px){ .brand-logo{width:72px;height:72px} }

    .brand-text{display:block;font-weight:800;letter-spacing:.2px;color:var(--text);font-size:clamp(18px,2.2vw,26px);line-height:1.15}
    @media (min-width:900px){ .brand-text{white-space:nowrap} }
    .brand-sub{display:block;font-size:13px;color:var(--muted);margin-top:4px;font-weight:700}

    nav ul{margin:0;padding:0;list-style:none;display:flex;gap:18px;align-items:center}
    /* Collapse nav on mobile and use the toggle */
    @media (max-width:1024px){
      nav ul{
        display:none;flex-direction:column;position:absolute;top:100%;left:0;right:0;
        background:var(--surface);padding:12px 20px;gap:10px;
        border-bottom:1px solid color-mix(in hsl, var(--text), transparent 90%);
      }
      #primaryNav[data-open="true"] ul{display:flex}
    }
    /* Two-row desktop header like index */
    @media (min-width:1025px){
      .nav{flex-wrap:wrap;align-items:flex-start;row-gap:8px}
      .brand{order:1}
      .cta-row{order:2;margin-left:auto}
      #primaryNav{order:3;flex:1 0 100%;margin-top:0 !important}
      #primaryNav ul{justify-content:center}
    }

    /* Dropdowns */
    .has-submenu{position:relative}
    .has-submenu > a{display:inline-flex;align-items:center;gap:6px}
    .has-submenu > a::after{content:"â–¾";font-size:12px;line-height:1;transition:transform .2s ease;opacity:.8}
    .has-submenu:hover > a::after, .has-submenu:focus-within > a::after{transform:rotate(180deg)}
    .submenu{position:absolute;top:100%;left:0;min-width:200px;background:var(--surface);border:1px solid color-mix(in hsl, var(--text), transparent 88%);border-radius:10px;padding:8px;display:none;z-index:1001;box-shadow:var(--shadow)}
    .submenu li{list-style:none}
    .submenu a{display:block;padding:8px 10px;border-radius:8px;text-decoration:none;color:var(--text)}
    .submenu a:hover{background:var(--surface-2);color:var(--brand)}
    @media (hover:hover){.has-submenu:hover > .submenu, .has-submenu:focus-within > .submenu{display:block}}
    @media (max-width:1024px){#primaryNav[data-open="true"] .submenu{position:static;display:block;padding:6px 0;border:0;box-shadow:none} .submenu a{padding-left:14px}}

    nav a{text-decoration:none;color:var(--text);font-weight:500;opacity:.9}
    nav a:hover, nav a[aria-current="page"], nav a[aria-current="true"]{opacity:1;color:var(--brand)}

    .cta-row{display:flex;gap:10px;align-items:center}
    .menu-toggle,.theme-toggle{width:38px;height:38px;border-radius:10px;border:1px solid color-mix(in hsl, var(--text), transparent 85%);background:var(--surface);display:grid;place-items:center;cursor:pointer}
    .menu-toggle:focus-visible,.theme-toggle:focus-visible{outline:none;box-shadow:var(--ring)}
    @media (min-width:1025px){ .menu-toggle{display:none} }

    /* Page layout */
    .container{max-width:1100px;margin:0 auto;padding:60px 20px}
    .section-head{text-align:center;margin-bottom:18px}
    .section-head h1{font-family:"Playfair Display",serif;margin:0 0 6px}
    .section-head p.meta{color:var(--muted);margin:0}

    .controls{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin:10px 0 12px}
    .input,.select{padding:10px 12px;border-radius:10px;border:1px solid color-mix(in hsl, var(--text), transparent 85%);background:var(--surface);min-width:220px}
    .btn{display:inline-flex;align-items:center;justify-content:center;padding:10px 16px;border-radius:999px;border:1px solid color-mix(in hsl, var(--brand), #fff 70%);background:transparent;color:var(--brand);font-weight:700;cursor:pointer;box-shadow:var(--shadow)}
    .btn:focus-visible{outline:none;box-shadow:var(--ring)}

    /* Hidden department pills (shown on Select) */
    .filters { display:none; gap:8px; justify-content:center; flex-wrap:wrap; margin:0 0 16px; }
    .filters[aria-hidden="false"] { display:flex; }
    .pill {
      appearance:none; border:1px solid color-mix(in hsl, var(--text), transparent 85%);
      background:var(--surface); color:var(--text);
      padding:6px 12px; border-radius:999px; font-weight:600; cursor:pointer;
    }
    .pill:hover { color:var(--brand); border-color:color-mix(in hsl, var(--brand), white 65%); }
    .pill.active, .pill[aria-pressed="true"] {
      background:linear-gradient(135deg, var(--brand), var(--brand-2)); color:#fff; border-color:transparent;
    }

    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    @media (max-width:1024px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:700px){.grid{grid-template-columns:1fr}}

    .card{border-radius:18px;background:linear-gradient(180deg,var(--surface),color-mix(in hsl, var(--surface), white 70%));border:1px solid color-mix(in hsl, var(--text), transparent 90%);box-shadow:var(--shadow);overflow:hidden}
    .body{padding:18px;text-align:center}
    .title{margin:6px 0 4px;font-weight:800}
    .meta{color:var(--muted);font-size:13px}

    .avatar{width:100%;display:grid;place-items:center;margin-top:12px}
    .avatar img{width:120px;height:120px;border-radius:50%;object-fit:cover;border:3px solid color-mix(in hsl, var(--brand-3), white 70%);box-shadow:0 6px 18px rgba(2,8,23,.12)}
    .avatar-fallback{width:120px;height:120px;border-radius:50%;display:grid;place-items:center;border:3px solid color-mix(in hsl, var(--brand-3), white 70%);box-shadow:0 6px 18px rgba(2,8,23,.12);background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#fff;font-weight:800;font-size:28px}
    .tag{display:inline-block;margin:4px 6px 0 0;padding:6px 10px;border-radius:999px;background:var(--surface-2);border:1px solid color-mix(in hsl, var(--text), transparent 90%);font-size:12px}
    .faculty-links{display:flex;gap:10px;justify-content:center;margin-top:10px}
    .icon-btn{width:36px;height:36px;display:grid;place-items:center;border-radius:10px;border:1px solid color-mix(in hsl, var(--text), transparent 85%);background:var(--surface);text-decoration:none;color:inherit}
    .icon-btn:hover{color:var(--brand);border-color:color-mix(in hsl, var(--brand), white 60%)}

    .reveal{opacity:0;transform:translateY(12px);transition:.6s ease}
    .reveal.visible{opacity:1;transform:translateY(0)}

    footer{padding:60px 20px;border-top:1px solid color-mix(in hsl, var(--text), transparent 90%);background:linear-gradient(180deg, transparent, color-mix(in hsl, var(--brand-2), transparent 92%))}
    .footer-grid{max-width:1100px;margin:0 auto;display:grid;grid-template-columns:1.2fr .8fr .8fr;gap:20px}
    .footer-col h4{margin:0 0 10px}
    .footer-col a{color:var(--text);opacity:.85;text-decoration:none;display:block;padding:6px 0}
    .footer-col a:hover{opacity:1;color:var(--brand)}
    .legal{max-width:1100px;margin:18px auto 0;color:var(--muted);font-size:13px}

    /* Footer Helpline CTA */
    .helpline-cta {
      margin: 18px 0 0;
      border-radius: 14px;
      padding: 14px 16px;
      background: linear-gradient(180deg, var(--surface), var(--surface-2));
      border: 1px solid color-mix(in hsl, var(--text), transparent 90%);
      box-shadow: var(--shadow);
      display: flex;
      gap: 12px;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
    }
    .helpline-info { display:flex; align-items:baseline; gap:10px; }
    .helpline-badge {
      display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px;
      background: color-mix(in hsl, var(--brand-3), white 75%); color:#0a2a7a; border:1px solid color-mix(in hsl, var(--brand-3), white 55%);
      font-weight:700; font-size:12px;
    }
    .helpline-number { font-weight:800; font-size:16px; color:var(--text); }

    /* Mobile overflow fix */
    @media (max-width: 1024px) {
      .nav { flex-wrap: nowrap; }
      .brand { flex: 1 1 auto; min-width: 0; }
      .brand > div { min-width: 0; }
      .brand-text { overflow-wrap: anywhere; }
      .cta-row { flex-shrink: 0; }

      html, body { overflow-x: hidden; }

      .container,
      .filters,
      .grid,
      .footer-grid {
        max-width: 100%;
        overflow-x: clip;
      }
      img, svg, canvas, video { max-width: 100%; height: auto; }
    }
    @media (max-width:700px){
      .footer-grid{grid-template-columns:1fr}
      .helpline-cta { gap: 10px; }
      .helpline-number { font-size: 15px; }
    }
  </style>
</head>
<body>
  <a href="#main" class="skip-link">Skip to content</a>

  <header>
    <div class="nav">
      <a href="index.html" class="brand" aria-label="Regent Institute of Science & Technology Home">
        <img class="brand-logo light" src="assets/img/logo-light.svg" alt="RIST logo" width="96" height="96">
        <img class="brand-logo dark"  src="assets/img/logo-dark.svg"  alt="" aria-hidden="true" width="96" height="96">
        <div>
          <span class="brand-text">Regent Institute of Science & Technology</span>
          <span class="brand-sub">Approved by AICTE â€¢ Affiliated to WBSCVT</span>
        </div>
      </a>
      <nav id="primaryNav" aria-label="Primary">
        <ul>
          <li><a href="index.html#about">About</a></li>
          <li><a href="index.html#notices">Notices</a></li>
          <li><a href="index.html#programs">Programs</a></li>
          <li class="mobile-only"><a href="index.html#research">Research</a></li>
          <li><a href="accreditation.html">Accreditation</a></li>

          <li class="has-submenu">
            <a href="faculty.html" aria-current="page">Faculty</a>
            <ul class="submenu" aria-label="Faculty submenu">
              <li><a href="index.html#faculty">Overview</a></li>
              <li><a href="faculty.html" aria-current="page">Directory</a></li>
            </ul>
          </li>

          <li class="has-submenu">
            <a ''>Grievance</a>
            <ul class="submenu" aria-label="Grievance submenu">
              <li><a href="grievance.html?type=student">For Students</a></li>
              <li><a href="grievance.html?type=employee">For Employees</a></li>
            </ul>
          </li>

          <li><a href="committees.html">Committees</a></li>
          <li class="mobile-only"><a href="index.html#campus">Campus</a></li>
          <li><a href="index.html#events">Events</a></li>
          <li class="mobile-only"><a href="index.html#placements">Placements</a></li>
          <li><a href="index.html#contact">Contact</a></li>
        </ul>
      </nav>
      <div class="cta-row">
        <button class="menu-toggle" id="menuToggle" aria-label="Open menu" aria-controls="primaryNav" aria-expanded="false">â˜°</button>
        <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">ðŸŒ—</button>
      </div>
    </div>
  </header>

  <main id="main" class="container">
    <div class="section-head">
      <h1>Faculty Directory</h1>
      <p class="meta">Search by name, filter by department, and click a card to view the profile.</p>
    </div>

    <div class="controls">
      <input id="q" class="input" type="search" placeholder="Search name, title or tagâ€¦" />
      <select id="dept" class="select" aria-label="Filter by department">
        <option value="">All Departments</option>
      </select>

      <!-- New: Select button to show/hide department tabs -->
      <button id="btnSelectTabs" class="btn" type="button" aria-controls="facultyTabs" aria-expanded="false">Select</button>

      <button id="clear" class="btn" type="button">Clear</button>
    </div>

    <!-- Tabs (hidden until Select is pressed) -->
    <div id="facultyTabs" class="filters" role="tablist" aria-label="Filter by department tabs" aria-hidden="true">
      <!-- Pills will be injected dynamically based on departments -->
    </div>

    <div id="facultyGridDir" class="grid" role="list" aria-label="Faculty list">
      <div class="card" style="padding:14px 16px; text-align:center; color:var(--muted)">Loading facultyâ€¦</div>
    </div>
  </main>

  <footer>
    <div class="footer-grid">
      <div class="footer-col">
        <div class="brand" style="display:flex;gap:12px;align-items:center;margin:0 0 12px">
          <img class="brand-logo light" src="assets/img/logo-light.svg" alt="RIST logo" width="80" height="80">
          <img class="brand-logo dark"  src="assets/img/logo-dark.svg"  alt="" aria-hidden="true" width="80" height="80">
          <div>
            <span class="brand-text">Regent Institute of Science & Technology</span>
            <span class="brand-sub">Bara Kanthalia, Telini Para, Barrackpore, Kolkata - 700121</span>
          </div>
        </div>
        <p style="max-width:520px;color:var(--muted)">Contact us for admissions, partnerships, campus visits, and more.</p>
      </div>
      <div class="footer-col">
        <h4>Quick Links</h4>
        <a href="index.html#about">About</a>
        <a href="index.html#notices">Notices</a>
        <a href="index.html#programs">Programs</a>
        <a href="index.html#research">Research</a>
        <a href="faculty.html" aria-current="page">Faculty</a>
        <a href="committees.html">Committees</a>
        <a href="index.html#events">Events</a>
        <a href="index.html#placements">Placements</a>
      </div>
      <div class="footer-col">
        <h4>Reach Us</h4>
        <a href="mailto:ristkolkata@gmail.com">ristkolkata@gmail.com</a>
        <a href="tel:+918584854950">+91 85848 54950</a>
        <a href="https://maps.google.com/?q=Bara+Kanthalia,+Telini+Para,+Barrackpore,+Kolkata+700121" target="_blank" rel="noopener">View on Google Maps</a>
      </div>
    </div>

    <!-- 24Ã—7 Women Helpline CTA -->
    <div class="helpline-cta" role="region" aria-label="24Ã—7 Women Helpline">
      <div class="helpline-info">
        <span class="helpline-badge">24Ã—7 Women Helpline</span>
        <span class="helpline-number">9330531353</span>
      </div>
      <a
        href="tel:+919330531353"
        class="btn btn-primary btn-sm"
        aria-label="Call 24 by 7 Women Helpline 9330531353"
      >Call Now</a>
    </div>

    <div class="legal">Â© <span id="year"></span> Regent Institute of Science & Technology. All rights reserved.</div>
  </footer>

  <script>
    // Smooth scroll (left click, no modifiers)
    document.addEventListener('click', (e) => {
      if (e.button !== 0 || e.metaKey || e.ctrlKey || e.shiftKey || e.altKey) return;
      const a = e.target.closest('a[href^="#"]'); if (!a) return;
      const hash = a.getAttribute('href'); if (!hash || hash.length <= 1) return;
      const el = document.getElementById(hash.slice(1)); if (!el) return;
      e.preventDefault();
      el.scrollIntoView({ behavior:'smooth', block:'start' });
      history.pushState(null, '', hash);
    });

    // Reveal
    const io = new IntersectionObserver(entries => { entries.forEach(en => { if (en.isIntersecting) en.target.classList.add('visible'); }); }, { threshold: 0.15 });
    document.querySelectorAll('.reveal').forEach(el => io.observe(el));

    // Mobile menu (accessible + Escape to close)
    (function(){
      const menuBtn = document.getElementById('menuToggle');
      const primaryNav = document.getElementById('primaryNav');
      function setState(open){
        primaryNav.setAttribute('data-open', String(open));
        menuBtn?.setAttribute('aria-expanded', String(open));
        menuBtn?.setAttribute('aria-label', open ? 'Close menu' : 'Open menu');
      }
      function collapseDesktop(){ if (window.innerWidth > 1024) setState(false); }
      window.addEventListener('resize', collapseDesktop);
      menuBtn?.addEventListener('click', ()=>{ const open=primaryNav.getAttribute('data-open')==='true'; setState(!open); });
      primaryNav?.addEventListener('click', (e)=>{ if (e.target.closest('a')) setState(false); });
      document.addEventListener('keydown', (e)=>{ if (e.key==='Escape') setState(false); });
    })();

    // Theme toggle
    (function themeManager(){
      const root = document.documentElement; const KEY = 'rist-theme';
      function setMeta(mode){ const light='#0d47d9', dark='#0b1220';
        let meta=document.querySelector('meta[name="theme-color"]');
        if(!meta){ meta=document.createElement('meta'); meta.name='theme-color'; document.head.appendChild(meta); }
        meta.setAttribute('content', mode==='dark'?dark:light);
      }
      function apply(mode){ if(mode==='light'||mode==='dark'){ root.setAttribute('data-theme',mode); root.style.colorScheme=mode; localStorage.setItem(KEY,mode); setMeta(mode);} else root.removeAttribute('data-theme'); }
      const saved = localStorage.getItem(KEY);
      if (saved) apply(saved); else { const sys=window.matchMedia('(prefers-color-scheme: dark)').matches; root.style.colorScheme=sys?'dark':'light'; setMeta(sys?'dark':'light'); }
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => { if (!localStorage.getItem(KEY)) { const m=e.matches?'dark':'light'; root.style.colorScheme=m; setMeta(m); }});
      document.getElementById('themeToggle')?.addEventListener('click', () => { const next=root.getAttribute('data-theme')==='dark'?'light':'dark'; apply(next); });
    })();

    // Year
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>

  <script src="assets/js/rist-data.js"></script>
  <script>
    // Directory logic with dynamic dept pills + Select toggle
    document.addEventListener('DOMContentLoaded', async () => {
      const q = document.getElementById('q');
      const deptSel = document.getElementById('dept');
      const clearBtn = document.getElementById('clear');
      const gridId = 'facultyGridDir';

      const tabsWrap = document.getElementById('facultyTabs');
      const btnSelectTabs = document.getElementById('btnSelectTabs');

      // Fetch data
      let all = [];
      try {
        all = await RIST.fetchFaculty();
      } catch (e) {
        console.error('Failed to fetch faculty:', e);
        document.getElementById(gridId).innerHTML =
          '<div class="card" style="padding:14px 16px; text-align:center; color:var(--muted)">Unable to load faculty right now.</div>';
        return;
      }

      // Build department list (for select and pills)
      const depts = Array.from(new Set(all.map(f => f.department).filter(Boolean))).sort();

      // Populate select
      depts.forEach(d => { const opt=document.createElement('option'); opt.value=d; opt.textContent=d; deptSel.appendChild(opt); });

      // Build pills: "All" + departments
      tabsWrap.innerHTML = '';
      const mkPill = (label, value, active=false) => {
        const b = document.createElement('button');
        b.type = 'button';
        b.className = 'pill' + (active ? ' active' : '');
        b.textContent = label;
        b.dataset.value = value;
        b.setAttribute('aria-pressed', active ? 'true' : 'false');
        return b;
      };
      const allPill = mkPill('All', '', true);
      tabsWrap.appendChild(allPill);
      depts.forEach(d => tabsWrap.appendChild(mkPill(d, d)));

      function updatePills(value){
        tabsWrap.querySelectorAll('.pill').forEach(p=>{
          const on = (p.dataset.value || '') === (value || '');
          p.classList.toggle('active', on);
          p.setAttribute('aria-pressed', on ? 'true' : 'false');
        });
      }

      function apply() {
        const needle = (q.value || '').trim().toLowerCase();
        const dept = (deptSel.value || '').trim().toLowerCase();

        const filtered = all.filter(f => {
          const inDept = !dept || (f.department || '').toLowerCase() === dept;
          const hay = [f.name, f.title, f.department, ...(f.tags || [])].join(' ').toLowerCase();
          const matches = !needle || hay.includes(needle);
          return inDept && matches;
        });

        RIST.renderFaculty(gridId, filtered, { linkToProfile: true });
        updatePills(deptSel.value || '');
      }

      // Debounce typing
      let t = null;
      const applyDebounced = () => { clearTimeout(t); t = setTimeout(apply, 120); };

      // Events (search + select)
      q.addEventListener('input', applyDebounced);
      q.addEventListener('search', apply);
      q.addEventListener('keydown', (e) => { if (e.key === 'Enter') { e.preventDefault(); apply(); } });
      deptSel.addEventListener('change', () => { apply(); });

      // Pills click -> set select + apply
      tabsWrap.addEventListener('click', (e)=>{
        const pill = e.target.closest('.pill'); if (!pill) return;
        const val = pill.dataset.value || '';
        deptSel.value = val; apply();
      });

      // Select button toggles visibility of pills
      function showTabs(){
        tabsWrap.setAttribute('aria-hidden','false');
        btnSelectTabs.setAttribute('aria-expanded','true');
        tabsWrap.scrollIntoView({ behavior:'smooth', block:'start' });
        const first = tabsWrap.querySelector('.pill'); first?.focus({ preventScroll:true });
      }
      function hideTabs(){
        tabsWrap.setAttribute('aria-hidden','true');
        btnSelectTabs.setAttribute('aria-expanded','false');
      }
      btnSelectTabs.addEventListener('click', ()=>{
        const hidden = tabsWrap.getAttribute('aria-hidden') !== 'false';
        hidden ? showTabs() : hideTabs();
      });

      // Clear button clears inputs and hides tabs
      clearBtn.addEventListener('click', () => {
        q.value = '';
        deptSel.value = '';
        apply();
        hideTabs();
      });

      // Initial render
      apply();
    });
  </script>
</body>
</html>